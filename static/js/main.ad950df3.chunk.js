(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{22:function(t,e,a){t.exports=a(38)},27:function(t,e,a){},37:function(t,e,a){},38:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),i=(a(27),a(13)),u=a(1),s=a(2),l=a.n(s),d=a(11),h=a(5),p=a(6),m=a(4),g=a(8),f=a(7);function v(){return b.apply(this,arguments)}function b(){return(b=Object(d.a)(l.a.mark((function t(){var e,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://api.mercadolibre.com/sites/MLB/categories",t.next=3,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 3:return e=t.sent,t.next=6,e.json();case 6:return a=t.sent,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t,e){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(l.a.mark((function t(e,a){var n,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="https://api.mercadolibre.com/sites/MLB/search?category=".concat(e,"&q=").concat(a),t.next=3,fetch(n);case 3:return r=t.sent,t.next=6,r.json();case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var j=function(t){Object(g.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={allCategories:"",loading:!0},n.fetchAllCategories=n.fetchAllCategories.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchAllCategories()}},{key:"handleChange",value:function(t){(0,this.props.getCategory)(t.target.id)}},{key:"fetchAllCategories",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:e=t.sent,this.setState({allCategories:e,loading:!1});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.allCategories;if(t.loading)return r.a.createElement("p",null,"Loading paragrafo");var a=e.map((function(t){return r.a.createElement("label",{className:"category",key:t.id,htmlFor:t.id},r.a.createElement("input",{"data-testid":"category",type:"radio",id:t.id,name:"category",value:t.name}),r.a.createElement("li",null,t.name))}));return r.a.createElement("ul",{className:"categories",onChange:this.handleChange},a)}}]),a}(r.a.Component),E=function(t){Object(g.a)(a,t);var e=Object(f.a)(a);function a(t){var n;Object(h.a)(this,a);var r=(n=e.call(this,t)).props.product,c=r.title,o=r.thumbnail,i=r.price,u=r.id;return n.state={title:c,thumbnail:o,price:i,id:u,quantity:0},n.handleClick=n.handleClick.bind(Object(m.a)(n)),n.validateDataFromStorage=n.validateDataFromStorage.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"handleClick",value:function(){this.saveStorage()}},{key:"constructObjectToSave",value:function(){var t=this.state;return{title:t.title,thumbnail:t.thumbnail,price:t.price,id:t.id,quantity:t.quantity}}},{key:"validateDataFromStorage",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e,a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=JSON.parse(localStorage.getItem("cart")),a=0;a<e.length;a+=1){for(n=0,r=0;r<e.length;r+=1)e[a].id===e[r].id&&(n+=1);e[a].quantity=n}localStorage.setItem("cart",JSON.stringify(e));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"saveStorage",value:function(){localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify([]));var t=JSON.parse(localStorage.getItem("cart"));t.push(this.constructObjectToSave()),localStorage.setItem("cart",JSON.stringify(t)),this.validateDataFromStorage()}},{key:"render",value:function(){var t=this.props,e=t.product,a=t.tag;return r.a.createElement("div",{className:"product-card","data-testid":"product"},r.a.createElement("h3",{"data-testid":"shopping-cart-product-name"},e.title),r.a.createElement("img",{src:e.thumbnail,alt:"product"}),r.a.createElement("div",null,e.price),r.a.createElement("button",{onClick:this.handleClick,type:"button","data-testid":a},"add carrinho"),r.a.createElement("p",{type:"number","data-testid":"shopping-cart-product-quantity"},e.quantity),r.a.createElement(i.b,{to:{pathname:"/details/".concat(e.id),state:{product:e}},"data-testid":"product-detail-link"},"Detalhes"))}}]),a}(r.a.Component),k=function(t){Object(g.a)(a,t);var e=Object(f.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t=this.props.products;return 0===t.length?r.a.createElement("div",null,"Nenhum produto foi encontrado."):t?r.a.createElement("div",{className:"products"},t.map((function(t){return r.a.createElement(E,{key:t.id,product:t,tag:"product-add-to-cart"})}))):void 0}}]),a}(r.a.Component),S=function(t){Object(g.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={categoryId:"",searchText:"",products:[]},n.handleClick=n.handleClick.bind(Object(m.a)(n)),n.getCategory=n.getCategory.bind(Object(m.a)(n)),n.changeHandler=n.changeHandler.bind(Object(m.a)(n)),n.seedStateProducts=n.seedStateProducts.bind(Object(m.a)(n)),n.fetchProductIdAndQuery=n.fetchProductIdAndQuery.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"handleClick",value:function(){this.seedStateProducts()}},{key:"getCategory",value:function(t){this.setState({categoryId:t}),this.fetchProductIdAndQuery(t)}},{key:"changeHandler",value:function(t){this.setState({searchText:t.target.value})}},{key:"seedStateProducts",value:function(){var t=this.state,e=t.searchText,a=t.categoryId;this.fetchProductIdAndQuery(a,e)}},{key:"fetchProductIdAndQuery",value:function(){var t=Object(d.a)(l.a.mark((function t(e){var a,n,r,c=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"",t.next=3,y(e,a);case 3:n=t.sent,r=n.results,this.setState({products:r});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,a=e.searchText,n=e.products;return r.a.createElement("div",{id:"home-page"},r.a.createElement("header",{className:"home-header"},r.a.createElement("div",null,r.a.createElement("input",{"data-testid":"query-input",value:a,onChange:function(e){return t.changeHandler(e)}}),r.a.createElement("button",{"data-testid":"query-button",type:"button",onClick:this.handleClick},"Pesquisar")),r.a.createElement(i.b,{"data-testid":"shopping-cart-button",to:"/meucarrinho"},"carrinho")),r.a.createElement("h3",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria."),r.a.createElement("div",{className:"home-main"},r.a.createElement(j,{getCategory:this.getCategory}),r.a.createElement(k,{products:n,seedStateProducts:this.seedStateProducts})))}}]),a}(r.a.Component),C=function(t){Object(g.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={products:null},n.getDataFromLocalStorage=n.getDataFromLocalStorage.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getDataFromLocalStorage()}},{key:"getDataFromLocalStorage",value:function(){var t=Object(d.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=JSON.parse(localStorage.getItem("cart")),this.setState({products:e});case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state.products;return null===t?r.a.createElement("div",null,r.a.createElement("p",null,"carrinho de compras!!"),r.a.createElement("p",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio")):r.a.createElement("div",null,r.a.createElement("p",null,"carrinho de compras!!"),r.a.createElement(k,{products:t}))}}]),a}(r.a.Component),w=function(t){Object(g.a)(a,t);var e=Object(f.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t=this.props,e=t.title,a=t.condition,n=t.product;return r.a.createElement("div",null,r.a.createElement(E,{product:n,tag:"product-detail-add-to-cart"}),r.a.createElement("h3",{"data-testid":"product-detail-name"},e),r.a.createElement("h4",null,"Especifica\xe7\xf5es T\xe9cnicas: "),r.a.createElement("ul",null,r.a.createElement("li",null,a)),r.a.createElement(i.b,{"data-testid":"shopping-cart-button",to:"/meucarrinho"},"Carrinho"))}}]),a}(n.Component),x=function(t){Object(g.a)(a,t);var e=Object(f.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t=this.props.location.state.product,e=t.title,a=t.condition;return r.a.createElement("div",null,r.a.createElement(w,{title:e,condition:a,product:t}))}}]),a}(n.Component);a(37);var I=function(){return r.a.createElement(i.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:S}),r.a.createElement(u.a,{path:"/meucarrinho",component:C}),r.a.createElement(u.a,{path:"/details/:id/",render:function(t){return r.a.createElement(x,t)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.ad950df3.chunk.js.map